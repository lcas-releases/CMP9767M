<?xml version="1.0"?>

<launch>

  <!-- Launch the Gazebo world.  -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(find uol_cmp9767m_base)/worlds/cmp9767m_1.world"/>
  </include>

  <group>
  <!-- model bringup -->
  <include file="$(find thorvald_model)/launch/model.launch">
    <arg name="robot_name" value="" />
    <arg name="tf_prefix" value="" />
    <arg name="robot_model" value="$(find thorvald_model)/config/thorvald_ii_4wd4ws_slim/thorvald_ii_4wd4ws_slim.yaml" />
    <arg name="model_extras" value="$(find uol_cmp9767m_base)/urdf/sensors.xacro" />
  </include>

  <!-- base bringup-->
  <include file="$(find thorvald_base)/launch/base_bringup.launch">
    <arg name="robot_model" value="$(find thorvald_model)/config/thorvald_ii_4wd4ws_slim/thorvald_ii_4wd4ws_slim.yaml" />
    <arg name="simple_sim" value="true" />
    <arg name="enable_odom_tf" value="false" />
  </include>

  <!-- twist mux bringup -->
  <include file="$(find thorvald_twist_mux)/launch/twist_mux.launch" />

  <!-- spawn robot in gazebo -->
  <node pkg="gazebo_ros" type="spawn_model" name="spawner" args="-urdf -param robot_description -model thorvald_ii" />
  </group>

</launch>
